import{ao as y,af as D,z as L,D as k,I as v,F as x,m as c,g as i,o as m,p as A,ai as E}from"./index-Bbxu-hwF.js";import{u as C}from"./email-C4vNF3Zd.js";import{e as T}from"./index-Do1FYWDS.js";import{a as b,b as R,c as j}from"./email-CDWA_9U-.js";import{s as B,a as z}from"./star-Df2_B9pP.js";import{s as F}from"./time-utils-zC19Ghl9.js";import{I as d}from"./iconify-B3RI33Gs.js";import"./el-scrollbar-3cDDDycq.js";import"./index-CVJxucxF.js";import"./el-empty-ZKykvMmM.js";import"./index-AhaUJ5LL.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-tag-Bw5e-AGx.js";import"./vnode-DNvBlgrq.js";import"./event-BB_Ol6Sd.js";import"./index-Dqe6e1WK.js";import"./el-checkbox-D4gY4cUC.js";import"./index-DIm3wlTT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./day-DqhKKaq5.js";import"./dayjs.min-hQTDDp5o.js";/* empty css                       *//* empty css                  *//* empty css                 */import"./index-Cz1gY7Av.js";import"./index-VQJnuaUD.js";import"./position-Y4NYiGiF.js";import"./throttle-7uJ_JKyK.js";const pt=Object.assign({name:"email"},{__name:"index",setup(J){const e=C(),s=y(),n=D(),o=L({}),r=k({timeSort:0});v(()=>{e.emailScroll=o,h()}),x(()=>s.currentAccountId,()=>{o.value.refreshList()});function l(){r.timeSort=r.timeSort?0:1,o.value.refreshList()}function f(t){e.contentData.email=t,e.contentData.delType="logic",e.contentData.showStar=!0,e.contentData.showReply=!0,E.push("/message")}const S=new Set;async function h(){for(;;){const t=o.value.latestEmail?.emailId||0;if(!o.value.firstLoad&&n.settings.autoRefreshTime)try{const a=s.currentAccountId,_=r.timeSort,u=await b(t,a);a===s.currentAccountId&&r.timeSort===_&&u.length>0&&u.forEach(p=>{S.add(p.emailId),o.value.addItem(p)})}catch(a){console.error(a)}await F(n.settings.autoRefreshTime*1e3)}}function g(t){e.starScroll?.addItem(t)}function I(t){e.starScroll?.deleteEmail([t.emailId])}function w(t,a){return j(s.currentAccountId,t,r.timeSort,a,0)}return(t,a)=>(m(),c(T,{ref_key:"scroll",ref:o,"cancel-success":I,"star-success":g,getEmailList:w,emailDelete:i(R),"star-add":i(z),"star-cancel":i(B),"time-sort":r.timeSort,actionLeft:"4px",onJump:f},{first:A(()=>[r.timeSort===0?(m(),c(i(d),{key:0,class:"icon",onClick:l,icon:"material-symbols-light:timer-arrow-down-outline",width:"28",height:"28"})):(m(),c(i(d),{key:1,class:"icon",onClick:l,icon:"material-symbols-light:timer-arrow-up-outline",width:"28",height:"28"}))]),_:1},8,["emailDelete","star-add","star-cancel","time-sort"]))}});export{pt as default};
